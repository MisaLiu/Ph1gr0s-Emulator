<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8" />
		<meta name="viewport" content="width=device-width" />
		<meta name="application-name" content="Ph1gr0s Emulator" />
		<meta name="description" content="An emulator for rhythm game 'Ph1gr0s'" />
		<meta name="author" content="MisaLiu 2022，Origin by lchzh3473" />
		<meta name="keywords" content="ph1gr0s,emulator,online" />

		
		
		<link href="./fonts/main.css" rel="stylesheet" />
		<link href="./css/font-mina.css" rel="stylesheet" />
		<link href="./css/main.less?v=0.0.1" rel="stylesheet/less" type="text/css" />
		<link href="./css/keyframes.css?v=0.0.1" rel="stylesheet" />
		
		<script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.11.1/less.min.js" ></script>
		<script src="//cdn.jsdelivr.net/npm/vconsole@3.3.4/dist/vconsole.min.js"></script>
		<script src="./js/jszip.min.js?v=3.7.1"></script>
		<script src="./js/stackblur.min.js?v=2.5.0"></script>
		
		<script src="./js/pixi-legacy.min.js?=5.3.10"></script>
		<script src="./js/pixi-sound.js?v=4.2.0"></script>
		
		<script>
			var global = {};
			var vConsole;
			/** const BrowserInfo = new Browser(); **/
			const DeviceInfo = {
				/**
				system         : BrowserInfo.os,
				systemVersion  : BrowserInfo.osVersion,
				systemType     : BrowserInfo.device,
				systemLanguage : BrowserInfo.language,
				
				browser        : BrowserInfo.browser,
				browserVersion : BrowserInfo.version,
				browserEngine  : BrowserInfo.engine,
				**/
				supportWebGL   : PIXI.utils.isWebGLSupported()
			};
			
			// 用户设置数据
			var settings = {
				windowRatio              : 16 / 9, // 屏幕宽高比
				antiAlias                : true, // 抗锯齿
				resolution               : window.devicePixelRatio, // 清晰度
				background               : true, // 启用背景图
				backgroundDim            : 0.75, // 背景图亮度
				backgroundBlur           : true, // 背景图模糊
				clickAnimate             : true, // 打击动画
				accIndicator             : false, // 准度指示器
				showFinger               : true, // 手指触摸点
				noteScale                : 8e3, // 按键缩放
				accIndicatorScale        : 500, // 准度指示器缩放
				multiNotesHighlight      : true, // 多押高亮
				showApStatus             : true, // AP/FC 指示器
				spectrumSettings         : {
					enabled: false,
					heightPercent: 0.5,
					alphaPercent: 0.8
				},
				forceCanvas              : (DeviceInfo.supportWebGL ? false : true), // 强制 Canvas 方式绘图
				showPerformanceIndicator : (getSearchQuery('debug') == 'true'), // 实时展示判定信息
				showJudgementRealTime    : (getSearchQuery('debug') == 'true'), // 添加一个用于显示性能状态的小窗
				
				hitsound                 : true, // 开启打击音
				musicVolume              : 1, // 音乐音量
				hitsoundVolume           : 0.75, // 打击音音量
				
				challengeMode            : false, // 课题模式
				autoPlay                 : false, // 自动播放
				chartDelay               : 0, // 谱面延迟
				
				developMode              : (getSearchQuery('debug') == 'true'), // 开发者模式（显示 Note 和判定线的相关信息）
				disableJudgeLineAlpha    : false
			};
			
			
			if (getSearchQuery('debug') == 'true') {
				vConsole = new VConsole();
			}
			
			function getSearchQuery(name) {
				let queryArray = location.search.substr(1).split('&');
				let queryObject = {};
				
				for (let query of queryArray) {
					let querySplit = query.split('=');
					queryObject[querySplit[0]] = querySplit[1];
				}
				
				return queryObject[name];
			}
		</script>
		
		<script src="./js/console.js?v=0.0.1"></script>
		<script src="./js/class.js?v=0.0.1"></script>
		<script src="./js/convert.js?v=0.0.1"></script>
		<script src="./js/function.js?v=0.0.1"></script>
		
		<title>Ph1gr0s Emulator</title>
	</head>
	<body>
		<canvas id="stage"></canvas>
		
		<div class="game-screen game-loading fade-in">
			<div class="logo"></div>
			<div class="prompt blank">轻触屏幕来开始</div>
			<div class="progress" style="--content:'游戏资源加载中'"></div>
		</div>

		<div class="game-screen select-song" style="display:none">
			<div class="song-list">
				<div class="header">
					<div class="title">选择乐曲</div>
					<div class="subtitle">准备好的话，就开始吧</div>

					<div class="actions">
						<input class="import-file-input" type="file" />
						<button class="import-file">导入文件</button>
					</div>
				</div>

				<div class="content">
					
				</div>
			</div>

			<div class="selected-song">
				<div class="loading center"></div>
			</div>

			<div class="song-extra-info">
				<div class="song-higest-score">数据加载中...</div>
				<div class="song-chart-designer">数据加载中...</div>
			</div>

			<div class="user-info">
				<div class="user-name">游客</div>
				<div class="user-rks rks rks-high">
					<div class="rks-type">RANKING</div>
					<div class="rks-value">??.??</div>
				</div>

				<img class="user-avatar" src="./img/testuseravatar.jpg" />
			</div>

			<button class="game-settings">设置</button>
			<button class="song-start highlight">开始游戏</button>

			<div class="song-loading-info">
				<div class="diff-info">
					<div class="diff-type"></div>
					<div class="diff-value"></div>
				</div>
				<div class="song-info">
					<div class="title"></div>
					<div class="subtitle"></div>
				</div>
			</div>

			<div class="progress song-loading-progress" style="--content:'少女祈祷中';--progress:0%"></div>
		</div>

		<script src="./js/main.js?v=0.0.1"></script>
	</body>
</html>