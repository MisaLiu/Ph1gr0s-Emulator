<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<!--script src="http://cdn.jsdelivr.net/npm/vconsole@3.3.4/dist/vconsole.min.js"></script>
	<script>
		var vConsole = new VConsole();
	</script-->
		<script src="./js/jszip.min.js"></script>
		<script src="./js/pixi.min.js"></script>
		<script src="./js/pixi-sound.js"></script>
		
		<script src="./js/class.js"></script>
		<script src="./js/convert.js"></script>
		
		<!--link rel="stylesheet" href="./css/font-mina.css" /-->
		<link rel="stylesheet" href="https://fonts.loli.net/css?family=Mina" />
	</head>
	<body>
		<div id="canvas-box">
			<!--canvad id="canvas"></canvas-->
		</div>
		
		<input type="file" id="zip" onchange="selectZip(this)" />
		
		
		<!--input type="number" value="0" id="judgeLine" />
		
		<input
			type="range"
			min="-360"
			max="360"
			style="width:100%"
			oninput="sprites[glid('judgeLine').value].angle = this.value"
		/>
		
		<input
			type="range"
			min="0"
			max="10000"
			value="0"
			style="width:100%"
			oninput="
				if (sprites.containers[glid('judgeLine').value].children[1])
					sprites.containers[glid('judgeLine').value].children[1].position.y = this.value;
				if (sprites.containers[glid('judgeLine').value].children[2])
					sprites.containers[glid('judgeLine').value].children[2].position.y = -this.value
			"
		/-->
		<input
			type="range"
			min="5000"
			max="10000"
			value="8000"
			style="width:100%"
			onchange="
				settings.noteScale = this.value;
				ResizeChartSprites(sprites, pixi.renderer.width, pixi.renderer.height, settings.noteScale);
			"
		/>
		<!--
		<input
			type="range"
			min="-300"
			max="300"
			style="width:100%"
			oninput="sprites[glid('judgeLine').value].position.x = this.value"
		/>
		<input
			type="range"
			min="-200"
			max="200"
			style="width:100%"
			oninput="sprites[glid('judgeLine').value].position.y = this.value"
		/>
		-->
		<button onclick="_chart.data = CalculateChartData(_chart.data);console.log(_chart.data)">Calculate Chart</button>
		<button onclick="pixi.ticker.add(CalculateChartActualTime)">Start Ticker</button>
		<button
			onclick="
				if (!_chart.audio.isLoaded) {
					alert('Audio is not loaded, please wait');
					return;
				}
				
				if (!global.audio) {
					pixi.ticker.add(CalculateChartActualTime);
					sprites = CreateChartSprites(_chart.data, true);
					global.audio = _chart.audio.play({start: 0});
				} else {
					global.audio = _chart.audio.play({start: (_chart.audio.duration * global.audio.progress)});
				}
			"
		>Play</button>
		<button
			onclick="
				if (global.audio) {
					_chart.audio.pause();
				}
			"
		>Pause</button>
		<br>
		<button onclick="sprites.accIndicator = CreateAccurateIndicator()">Draw Acc</button>
		<br>
		<select id="select" onchange="SwitchChart(this.value)">
			<option value="-1" selected>请先选择一个文件</option>
		</select>
		<!--
		<audio src="" id="audio" style="width:100%" controls></audio>
		-->
		<div id="time"></div>
		<div style="font-family:Mina">Test font.</div>
	</body>
	<style>
		/**
		#canvas-box {
			position: relative;
			width: 100%;
			height: 0;
			padding-top: 56.25%;
		}
		
		#canvas-box canvas {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
		**/
	</style>
	<script>
		function glid(id) {
			return document.getElementById(id);
		}
	</script>
	<script src="./js/test.js"></script>
</html>